{% set sections = {
  'portada': { tab: 'Portada', url: '/' },
  'Chistes buenos': { tab: 'Buenos', url: '/chistes-buenos' },
  'Chistes cortos': { tab: 'Cortos', url: '/chistes-cortos' }
} %}
{% macro header() %}
  <header class="site-header" role="banner">
    <div class="left">
      <a href="/">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQUAAAAcCAMAAABf5lpEAAADAFBMVEUAAAD/iAD9iAD////////////9/f3//////wD/////iQD/////////iAD/////////iAD/iAD/iAD////9iAD/////////////iAD/iAD/igD/iQD9/f3/////////iAD////9iAD9/f39iAD+/v79/f3////9/f39iAD/////////iQD/////////iAD+/v7/////////////////iAD/////iAD+/v7/iAD/iQD/iAD/iQD/hwD/////iQD/fwD/qgD/fwD/jgD/iAD/iAD/////iQD/iAD/iAD/iAD/iQD/////////////hQD+/v7/iQD/////////////iQD/iwH/////iAD/iAD/iAD/iAD/iQD////////////////////////////////////+/v79iAD/////iQD9iAD+iAD/iAD/iAD9iAD/iAD////////////////9iAD/////////iQD/hwD/////////iAD/iQD/iAD/iQD/iQD/hwD/iQD/iAD/////////iAD9/f3+iAD////9iQD/////iQD////////9iAD/////////////////iAD/iAD/hwD/iAD/////iQD/iAD/iAD/iAD/iQD+iAD/////igD/////////////iAD/////////iAD/iQD/////iAD/hgD/iAD/////iQD/iwD/hgD/iAD/iQD/iAD/////////////////iAD/iQD/////iAD/////////iAD/iQD/iQD/iQD/iAD9iAD/iAD/iAD/iQD/jwD/////////////iAD////+iAD/////iQD/iAD/iQD+iAD/hwD+iQD/iAD/igD////////+/v79/f3/////iQD/iAD+iAD/iAD/kQD/iAD/hwD////////////////+/v7/iAD/iQD/////iAD9hwD/iQD/hwD/iAD/////////////////hwD/iAD/iAD+iAD/////////iQD/hQD/////iAD/hwD/igD/////iQCtCF0bAAAA/3RSTlMA8uoCs6y0AQGx3LS157et7eHir++3t6nf6xPusQe9/Avoq+yorwO5476h6LkN5KfBUgQszi70pe9DthwWHCIEAwIF6rQiKU6vyPduXxoM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" alt="Feti-chistes.es">
      </a>
    </div>
    <div class="right">
      <button type="button" class="burger btn" id="btn-menu" aria-controls="nav-menu">Menú</button>
    </div>
  </header>
{% endmacro %}

{% macro sidebar(section, categories) %}
  <aside class="sidebar" role="complementary" id="nav-menu">
    <nav class="sections" aria-label="Secciones" role="navigation">
      <ul>
        {% for title, data in sections %}
        {% if title === section %}
        <li class="selected"><a href="{{ data.url }}">{{ title | capitalize }}</a></li>
        {% else %}
        <li><a href="{{ data.url }}">{{ title | capitalize }}</a></li>
        {% endif %}
        {% endfor %}
      </ul>
    </nav>
    <nav role="navigation">
      <h2>Categorías</h2>
      <ul>
        {% for cat in categories %}
        {% if cat.level === 1 %}
          {% if cat._id === section %}
          <li class="selected"><a href="/chistes/{{ cat._id }}">{{ cat.menu | capitalize }}</a></li>
          {% else %}
          <li><a href="/chistes/{{ cat._id }}">{{ cat.menu | capitalize }}</a></li>
          {% endif %}
        {% endif %}
        {% endfor %}
          <li class="more"><a href="/tipos-de-chistes">Más categorías…</a></li>
      </ul>
    </nav>
  </aside>
{% endmacro %}

{% macro tabs(section) %}
  <nav class="tabs" aria-label="Secciones" role="navigation">
    <ul>
      {% for title, data in sections %}
      {% if title === section %}
      <li class="selected"><a href="{{ data.url }}">{{ data.tab | capitalize }}</a></li>
      {% else %}
      <li><a href="{{ data.url }}">{{ data.tab | capitalize }}</a></li>
      {% endif %}
      {% endfor %}
    </ul>
  </nav>
{% endmacro %}

{% macro lista(items, category) %}
  {% for item in items %}
    <article class="card">
      <header>
        <h2 class="title"><a href="/chiste/{{ item._id }}">{{ item.titulo }}</a></h2>
        <small class="author">Enviado por <em class="name">{{ item.autor }}</em>,
          el <time class="date" datetime="{{ item.datetime }}">{{ item.fecha }}</time>
        </small>
      </header>
      <div class="text">{{ item.texto | striptags(true) | escape | nl2br }}</div>
      {% if not category %}
      <footer>
        <small class="category">Archivado en: <a href="/chistes/{{ item.categoria._id }}">{{ item.categoria.menu }}</a></small>
      </footer>
      {% endif %}
    </article>
  {% endfor %}
  <footer class="loader"></footer>
{% endmacro %}

{% macro styles() %}
  <style media="screen">
    {% include "main.css" %}
  </style>
{% endmacro %}

{% macro analytics() %}
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2285758-4', 'auto');
  ga('send', 'pageview');
</script>
{% endmacro %}
