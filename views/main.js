!function(){function e(e){e.onclick||(e.onclick=function(){u(e);var t=e.dataset.cardId,n=document.querySelector(".share").getBoundingClientRect().top,o=document.getElementById(t),c=o.getBoundingClientRect().bottom+16,s=n-c,a=document.getElementById("share:"+t).querySelector("button");s<0&&window.scrollBy(0,-s),a.focus()})}function t(){d=JSON.parse(localStorage.getItem("fch-ups")||"[]"),f=JSON.parse(localStorage.getItem("fch-downs")||"[]")}function n(){localStorage.setItem("fch-ups",JSON.stringify(d)),localStorage.setItem("fch-downs",JSON.stringify(f))}function o(e,t){var o="vup"===e?d:f,s="vup"===e?f:d,a=s.indexOf(t);return-1!==a&&s.splice(a,1),o.push(t),n(),c(),-1!==a}function c(){d.forEach(s("vup","vdown")),f.forEach(s("vdown","vup"))}function s(e,t){return function(n){var o=document.getElementById(e+":"+n),c=document.getElementById(t+":"+n);o&&!o.classList.contains("pressed")&&(o.className+=" pressed",o.setAttribute("aria-pressed","true"),c.className=c.className.replace(" pressed",""),c.setAttribute("aria-pressed","false"))}}function a(){document.querySelectorAll(".btn.vote").forEach(function(e){e.onclick||(e.onclick=r)})}function r(){var e,t=this.id.split(":"),n=t[0],c="vup"===n?"vdown":"vup",s=t[1],a="/chiste/"+s+"/action",r=this;this.classList.contains("pressed")||(e=o(n,s),l(a,{action:n,reverse:e},function(e,t){var n=document.getElementById(c+":"+s);if(e)return console.error(e);r.querySelector(".nvotes").textContent=t.votes,n.querySelector(".nvotes").textContent=t.otherVotes}),ga("send",{hitType:"event",eventCategory:"Chiste",eventAction:"vup"===n?"Me Gusta":"No Me Gusta",eventLabel:s}))}function u(e){var t=document.getElementById(e.getAttribute("aria-controls"));"true"===e.getAttribute("aria-expanded")?(e.setAttribute("aria-expanded","false"),t.setAttribute("aria-expanded","false")):(e.setAttribute("aria-expanded","true"),t.setAttribute("aria-expanded","true"))}function i(){var e=document.querySelector(".cconsent");localStorage&&localStorage.getItem("duendes-cc")||l("https://d2pcbc801cuv3o.cloudfront.net/cconsent.json",function(t,n){n&&"europe"===n.location?(e.className+=" visible",document.querySelector(".cconsent .close").onclick=function(){e.className="cconsent",localStorage&&localStorage.setItem("duendes-cc","1")}):localStorage&&localStorage.setItem("duendes-cc","1")})}function l(e,t,n){var o=new XMLHttpRequest;n?(o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t=JSON.stringify(t)):(n=t,t=null,o.open("GET",e,!0)),o.onload=function(){if(o.status>=200&&o.status<400)try{var e=JSON.parse(o.responseText);n(null,e)}catch(e){n(e)}else n(o.status)},o.onerror=function(){n("NETWORK_ERROR")},o.send(t)}var d,f;document.addEventListener("DOMContentLoaded",function(){var n=document.getElementById("btn-menu");n.onclick=function(){u(n)},document.querySelectorAll(".btn.expand-share").forEach(e),t(),c(),a(),i()})}();