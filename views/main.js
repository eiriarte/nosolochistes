!function(){function e(){l=JSON.parse(localStorage.getItem("fch-ups")||"[]"),i=JSON.parse(localStorage.getItem("fch-downs")||"[]")}function t(){localStorage.setItem("fch-ups",JSON.stringify(l)),localStorage.setItem("fch-downs",JSON.stringify(i))}function n(e,n){var s="vup"===e?l:i,c="vup"===e?i:l,a=c.indexOf(n);return-1!==a&&c.splice(a,1),s.push(n),t(),o(),-1!==a}function o(){l.forEach(s("vup","vdown")),i.forEach(s("vdown","vup"))}function s(e,t){return function(n){var o=document.getElementById(e+":"+n),s=document.getElementById(t+":"+n);o&&!o.classList.contains("pressed")&&(o.className+=" pressed",o.setAttribute("aria-pressed","true"),s.className=s.className.replace(" pressed",""),s.setAttribute("aria-pressed","false"))}}function c(){document.querySelectorAll(".btn.vote").forEach(function(e){e.onclick||(e.onclick=a)})}function a(){var e,t=this.id.split(":"),o=t[0],s="vup"===o?"vdown":"vup",c=t[1],a="/chiste/"+c+"/action",r=this;this.classList.contains("pressed")||(e=n(o,c),u(a,{action:o,reverse:e},function(e,t){var n=document.getElementById(s+":"+c);if(e)return console.error(e);r.querySelector(".nvotes").textContent=t.votes,n.querySelector(".nvotes").textContent=t.otherVotes}),ga("send",{hitType:"event",eventCategory:"Chiste",eventAction:"vup"===o?"Me Gusta":"No Me Gusta",eventLabel:c}))}function r(e,t){-1!==t.className.indexOf("toggled")?(t.className=t.className.replace(" toggled",""),e.setAttribute("aria-expanded","false"),t.setAttribute("aria-expanded","false")):(t.className+=" toggled",e.setAttribute("aria-expanded","true"),t.setAttribute("aria-expanded","true"))}function u(e,t,n){var o=new XMLHttpRequest;n?(o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t=JSON.stringify(t)):(n=t,t=null,o.open("GET",e,!0)),o.onload=function(){if(o.status>=200&&o.status<400)try{var e=JSON.parse(o.responseText);n(null,e)}catch(e){n(e)}else n(o.status)},o.onerror=function(){n("NETWORK_ERROR")},o.send(t)}var l,i;document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector(".cconsent"),n=document.getElementById("btn-menu"),s=document.getElementById("nav-menu");n.onclick=function(){r(n,s)},e(),o(),c(),localStorage&&localStorage.getItem("duendes-cc")||u("https://d2pcbc801cuv3o.cloudfront.net/cconsent.json",function(e,n){n&&"europe"===n.location?(t.className+=" visible",document.querySelector(".cconsent .close").onclick=function(){t.className="cconsent",localStorage&&localStorage.setItem("duendes-cc","1")}):localStorage&&localStorage.setItem("duendes-cc","1")})})}();