!function(){function e(e){if(c.classList.contains("visible")){var n=e.key||e.keyCode;27===n||"Escape"===n?t():9!=n&&"Tab"!==n||(e.shiftKey?document.activeElement===m&&(e.preventDefault(),u.focus()):document.activeElement===u&&(e.preventDefault(),m.focus()))}}function t(){c.classList.remove("visible"),a.classList.remove("visible"),l.focus()}function n(){r.select(),document.execCommand("copy")&&(p.setAttribute("aria-hidden","false"),p.setAttribute("role","alert"),p.classList.add("visible"),setTimeout(function(){p.classList.remove("visible"),p.setAttribute("aria-hidden","true"),p.removeAttribute("role")},2e3),ga("send",{hitType:"event",eventCategory:-1!==r.value.indexOf("/chiste/")?"Chiste":"Categoría",eventAction:"Copiar Enlace",eventLabel:r.value.split("/").pop()}))}function o(e){var t,n,o=e.parentElement.dataset.url||window.location.href,i=-1!==o.indexOf("/chiste/")?"Chiste":"Categoría",c=o.split("/").pop();o=o.split("?")[0]+"?"+h[e.title],o=d[e.title].replace("%url%",encodeURIComponent(o)),n=e.parentElement.classList.contains("share-item")?e.parentElement.parentElement.parentElement.querySelector(".text").textContent:e.parentElement.id?document.querySelector(".text").textContent:document.title,t=n,t.length>228&&(t=t.slice(0,225)+"[…]"),o=o.replace("%tw_text%",encodeURIComponent(t)),o=o.replace("%text%",encodeURIComponent(n)),window.open(o,"_blank"),ga("send",{hitType:"event",eventCategory:i,eventAction:"Compartir en "+e.title,eventLabel:c})}function i(e){var t,n=e.parentElement.dataset.url||window.location.href;l=document.activeElement||e,t=e.parentElement.classList.contains("share-item")?e.parentElement.parentElement.parentElement.querySelector(".title").textContent:document.title,s.textContent=t,r.value=n,c.classList.add("visible"),a.classList.add("visible"),u.focus()}var c,a,l,s,r,u,m,p,d={Twitter:"https://twitter.com/intent/tweet?text=%tw_text%&url=%url%&via=feti_chistes&hashtags=chistes",Facebook:"https://www.facebook.com/sharer/sharer.php?u=%url%","Google+":"https://plus.google.com/share?url=%url%",WhatsApp:"https://api.whatsapp.com/send?text=%text%%20%url%"},h={Twitter:"utm_source=twitter&utm_medium=social&utm_campaign=fchtoolbar",Facebook:"utm_source=facebook&utm_medium=social&utm_campaign=fchtoolbar","Google+":"utm_source=gplus&utm_medium=social&utm_campaign=fchtoolbar",WhatsApp:"utm_source=whatsapp&utm_medium=social&utm_campaign=fchtoolbar"};document.addEventListener("DOMContentLoaded",function(){c=document.querySelector(".popup-bg"),a=document.querySelector(".popup"),p=document.querySelector(".msg-copied"),u=document.querySelector(".btn-copy-link"),m=document.querySelector(".btn-close-copy"),s=document.getElementById("link-title"),r=document.getElementById("link-input"),u.onclick=n,m.onclick=t,document.body.onkeydown=e,document.querySelectorAll(".btn-social").forEach(function(e){e.onclick="Copiar enlace"===e.title?function(){i(e)}:function(){o(e)}})})}();